(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1256:function(e,t,o){var content=o(1527);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(17).default)("109e5fb4",content,!0,{sourceMap:!1})},1526:function(e,t,o){"use strict";var r=o(1256);o.n(r).a},1527:function(e,t,o){(e.exports=o(16)(!1)).push([e.i,".notab[data-v-6b1213a8]{height:calc(100vh - 216px);width:100%;background:#fff;border:1px solid #e2e4e8}.notab>div[data-v-6b1213a8]:first-child{width:100%;height:calc(100vh - 266px)}.staticNotab[data-v-6b1213a8]{height:calc(100vh - 136px);width:100%;background:#fff;border:1px solid #e2e4e8}.reportNoTab>div[data-v-6b1213a8]:first-child{width:100%;height:calc(100vh - 296px);overflow-y:auto}.userNotab[data-v-6b1213a8]{height:calc(100vh - 180px);width:100%;background:#fff}.userNotab>div[data-v-6b1213a8]:first-child{width:100%;height:calc(100vh - 188px);overflow-y:auto}.myTab[data-v-6b1213a8]{height:calc(100vh - 258px);background:#fff;width:100%;border:1px solid #e2e4e8}.myTab>div[data-v-6b1213a8]:first-child{width:100%;height:calc(100vh - 308px)}@media screen and (max-width:1680px){.notab[data-v-6b1213a8]{height:calc(100vh - 208px);background:#fff}.notab>div[data-v-6b1213a8]:first-child{height:calc(100vh - 258px)}.myTab[data-v-6b1213a8]{height:calc(100vh - 250px);background:#fff}.myTab>div[data-v-6b1213a8]:first-child{height:calc(100vh - 300px)}.staticNotab[data-v-6b1213a8]{height:calc(100vh - 132px)}}@media screen and (max-width:1440px){.notab[data-v-6b1213a8]{height:calc(100vh - 173px);background:#fff}.notab>div[data-v-6b1213a8]:first-child{height:calc(100vh - 223px)}.myTab[data-v-6b1213a8]{height:calc(100vh - 215px);background:#fff}.myTab>div[data-v-6b1213a8]:first-child{height:calc(100vh - 265px)}.staticNotab[data-v-6b1213a8]{height:calc(100vh - 107px)}}@media screen and (max-width:1366px){.reportNoTab>div[data-v-6b1213a8]:first-child{width:100%;height:calc(100vh - 286px);overflow-y:auto}}[v-cloak][data-v-6b1213a8]{display:none}.el-tree--highlight-current .el-tree-node.is-current>.el-tree-node__content[data-v-6b1213a8]{background:rgba(32,160,255,.5)!important}.l-icons[data-v-6b1213a8]{font-size:2rem;cursor:pointer;color:#2892e2}.el-container[data-v-6b1213a8]{height:calc(100vh - 75px);overflow:hidden}.el-container .el-aside[data-v-6b1213a8]{background-color:#fff;color:#333;border:1px solid #bfcbd9;margin:10px 10px 0 0;height:calc(100% - 13px)}.el-container .el-aside .closeBox[data-v-6b1213a8]{width:100%;height:100%}.el-container .el-aside .closeBox .title[data-v-6b1213a8]{border-bottom:1px solid #bfcbd9;margin:0;line-height:30px;font-size:16px;font-weight:700;color:#2892e2;text-align:left;text-indent:1em;padding:5px}.el-container .el-aside .closeBox .orgBox[data-v-6b1213a8]{position:absolute;font-size:12px;color:grey;border:1px solid #ccc;text-align:center;padding:0;width:90px;background:#fff;z-index:2}.el-container .el-aside .closeBox .orgBox li[data-v-6b1213a8]{line-height:23px;padding:5px 0;width:100%;cursor:pointer}.el-container .el-aside .closeBox .orgBox li a[data-v-6b1213a8]{width:100%;display:inline-block;color:grey}.el-container .el-aside .closeBox .orgBox li[data-v-6b1213a8] :hover{background:#eee}.el-container .el-main[data-v-6b1213a8]{position:relative;background-color:#fff;color:#333;border:1px solid #bfcbd9;margin:10px 0 0;padding:0;height:calc(100% - 13px)}.el-container .el-main .header[data-v-6b1213a8]{padding:5px;border-bottom:1px solid #bfcbd9}.el-container .el-main .header .title[data-v-6b1213a8]{margin:0;line-height:30px;padding:0 10px;font-size:16px;font-weight:700;color:#2892e2;text-align:left}.el-container .el-main .header .right[data-v-6b1213a8]{text-align:right}.el-container .el-main .header .left[data-v-6b1213a8]{text-align:left}.el-container .el-main .body .userNotab[data-v-6b1213a8]{border:none}.el-container .el-main .body .userNotab .el-pagination[data-v-6b1213a8]{height:100%}.el-container .el-main .is-ableClick[data-v-6b1213a8]{cursor:pointer}.el-container .el-main .table-row[data-v-6b1213a8]{height:46px}.el-container .left[data-v-6b1213a8]{text-align:left}",""])},1835:function(e,t,o){"use strict";o.r(t);o(222);var r=o(40),n=(o(133),o(33),o(76),o(6)),c=o(482),l=o.n(c),d=o(1189),h=o(1188),f=o(1187),m=o(1186),v=o(1147);o(1153),o(1154),l.a.Random;n.a.isOnline||(l.a.mock(RegExp(n.a.ajaxUrl+"/upmsOrg/findUpmsOrgTree.*"),"post",function(){return{status:"OK",code:"success",message:"",data:[{orgName:"全部",parentCode:"-1",orgCode:"1",tenantId:"1",leaf:!1,orgId:"1"}],token:"",refreshToken:"",dataType:"json"}}),l.a.mock(RegExp(n.a.ajaxUrl+"/upmsUser/queryUserList.*"),"post",{status:"OK",code:"success",message:"",data:{"content|3-10":[{"userId|+1":"1",loginName:"@name",password:"Y13RNmw6TBE=",userName:"@cname",userSex:"0",userEmail:"@email",userPhone:/\d{11}/,createDate:"@date",userType:"0",userPhoto:"",status:"0","tenantId|+1":"1","orgCode|+1":"1",extendstr1:"",extendstr2:"",extendstr3:""}],last:!0,totalPages:1,totalElements:10,number:0,size:15,sort:[{direction:"DESC",property:"createDate",ignoreCase:!1,nullHandling:"NATIVE",ascending:!1,descending:!0}],first:!0,numberOfElements:1},token:"",refreshToken:"",dataType:"json"}));var w={components:{ModifyUser:d.a,ModifyRoleUser:h.a,AddUser:f.a,RefuseUser:m.a,Pagination:v.a},data:function(){return{ACCEPT_URL:"/user/acceptOrRefuse",tenantId:"",orgCode:"",cloShow:!0,userStatus:"0",setFlag:!0,searchUserName:"",flag:!0,firstLevel:!1,menuVisible:!1,markFloat:1,iconClass:"el-icon-delete",iconCont:"已激活",orgObj:"",keys:[],node:"",pageNo:1,pageSize:15,total:0,pageInfo:{pageNo:1,pageSize:6,total:1},islock:!0,operateAuth:{edit:!0,logoff:!0,locked:!1,actived:!0,role:!0,reset:!0,restore:!1,accept:!1,refuse:!1},formObj:{addFormVisible:!1,editFormVisible:!1,roleFormVisible:!1,refuseFormVisible:!1},userObj:{loginNameValidate:"",username:"",newPassword:"",validatePassword:"",name:"",sex:"",phone:"",mobile:"",email:""},formRules:"",props:{label:"orgName",children:"zones",isLeaf:"leaf"},defaultProps:{children:"children",label:"label"},tableData:[],tempTreeData:[]}},mounted:function(){this.changeUser(0)},methods:{initList:function(){},userPageListener:function(e,data){"ModifyUser"&&(this.formObj.editFormVisible=!1),"ModifyRoleUser"&&(this.formObj.roleFormVisible=!1),"AddUser"&&(this.formObj.addFormVisible=!1),"RefuseUser"&&(this.formObj.refuseFormVisible=!1)},addUpdate:function(e,t,o){if("{}"==JSON.stringify(this.orgObj))this.$message({type:"warning",message:"请先选择组织机构!"});else{var r={};r=o?{orgObj:t,rowObj:o||null}:{orgObj:t},this.$router.push({name:e,params:r})}},handleUserClick:function(e,t,o){var r=this;if("add"===e&&(this.formObj.addFormVisible=!0),"edit"===e&&(this.formObj.editFormVisible=!0,this.userObj=o,this.userObj.loginNameValidate=o.loginName,!0),"remove"===e){var c=this;this.$confirm("确定要注销该用户吗？","提示信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:o.id};n.a.post(n.a.forent_url.url+"/user/deleteById.mvc",e).then(function(e){e.data;"success"==e.code&&c.$message({type:"success",message:"注销成功"})})}).catch(function(a,b){r.$message({type:"info",message:"已取消注销"})}),!0}if("restore"===e){c=this;this.$confirm("确定要恢复该用户吗？").then(function(){var e={id:o.id};n.a.post(n.a.forent_url.url+"/user/recoveryUser.mvc",e).then(function(e){e.data;"success"==e.code&&r.$message({type:"success",message:"恢复成功"})})}).catch(function(a,b){r.$message({type:"info",message:"已取消恢复"})}),!0}if("reset"===e){c=this;this.$confirm("确定要重置密码吗？").then(function(){var e={id:o.id};n.a.post(n.a.forent_url.url+"/user/restPassword.mvc",e).then(function(e){e.data;"success"==e.code&&r.$message({type:"success",message:"重置成功"})})}).catch(function(a,b){r.$message({type:"info",message:"已取消重置"})}),!0}if("lock"===e){var l;console.log("操作前:".concat(o.isLock)),l=null!=o.isLock&&""!=o.isLock&&"false"!=o.isLock;var d={id:o.id,flag:!l};n.a.post(n.a.forent_url.base_url+"/user/lockandunlockById.mvc",d).then(function(e){e.data;console.log("params:".concat(JSON.stringify(d))),"success"==e.code&&(r.$message({type:"success",message:e.message}),"false"==o.isLock?o.isLock="true":o.isLock="false",console.log("操作后:".concat(o.isLock)))}),!0}if("role"===e&&(this.formObj.roleFormVisible=!0,!0),"accept"===e){c=this;n.a.post(n.a.forent_url.base_url+this.ACCEPT_URL,{currentUserId:n.a.getGlobalVal("userObj").id,userId:o.id,content:"",flag:"1"}).then(function(e){"success"==e.code&&r.$message({type:"success",message:e.message})}).catch(function(e){r.$message({type:"warn",message:"操作失败"})})}if("refuse"===e){c=this;this.userObj=o,this.formObj.refuseFormVisible=!0}},handleSearch:function(){var e=this,t={pageNum:this.pageInfo.pageNo||1,pageSize:this.pageInfo.pageSize||15,tenantId:this.tenantId||"",orgCode:this.orgCode,showFlag:this.userStatus,userName:this.$refs.inputSearch.value};n.a.post(n.a.forent_url.url+"/user/list.mvc",t).then(function(t){t.data&&(e.total=t.data.total,e.tableData=t.data.rows,e.listLoading=!1)})},handleNodeClick:function(data,e,t){this.tenantId=data.tenantId,this.orgCode=data.orgCode,this.orgObj=data,this.flag=!0,this.markFloat=e.id,this.keys=data.parentCode,1!=e.id?this.getUserList(this.userStatus):(this.orgCode="",this.getUserList(this.userStatus))},hanleContextmenu:function(e,t,o,r){this.menuVisible=!0,this.firstLevel=1!==o.level;var menu=document.querySelector("#menu");menu.style.left=e.clientX+20+"px",menu.style.top=e.clientY-60+"px",this.orgCode=t.orgCode,this.keys=t.parentCode,this.orgObj=t,this.node=o},sonHandleCurrentChange:function(e){this.pageInfo.pageSize=e.pageSize?parseInt(e.pageSize):this.pageInfo.pageSize,this.pageInfo.pageNo=e.pageNo?parseInt(e.pageNo):this.pageInfo.pageNo,this.getUserList(this.userStatus)},removeTree:function(e,data){},orgDel:function(e,t){var o=this;this.$confirm("确认删除?","提示信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={tenantId:t.tenantId,orgId:t.orgId};n.a.post(n.a.ajaxUrl+"upmsOrg/deleteOrg",e).then(function(e){if("success"==e.data.code){for(var r=0,i=0;i<o.tempTreeData.length;i++)o.tempTreeData[i].tenantId==t.tenantId&&o.tempTreeData[i].orgId==t.orgId&&(r=i);o.tempTreeData.splice(r,1),o.$refs.tree.updateKeyChildren([o.keys],o.tempTreeData),o.$message({type:"success",message:"删除成功!"})}else o.$message({type:"success",message:"删除失败!"})})}).catch(function(e){o.$message({type:"info",message:"已取消删除"})})},closeBox:function(){this.menuVisible=!1},changeIcon:function(e,t){this.islock=!this.islock,this.islock?(this.iconClass="el-icon-delete",this.iconCont="已激活",t.status=0):(this.iconClass="el-icon-edit",this.iconCont="已锁定",t.status=1),this.$message({type:"success",message:"操作成功!"})},changeUser:function(label){"0"==label&&(this.operateAuth.edit=!0,this.operateAuth.logoff=!0,this.operateAuth.locked=!0,this.operateAuth.role=!0,this.operateAuth.reset=!0,this.operateAuth.restore=!1,this.operateAuth.accept=!1,this.operateAuth.refuse=!1),"1"==label&&(this.operateAuth.edit=!0,this.operateAuth.logoff=!1,this.operateAuth.locked=!1,this.operateAuth.role=!1,this.operateAuth.reset=!1,this.operateAuth.restore=!0,this.operateAuth.accept=!1,this.operateAuth.refuse=!1),"2"==label&&(this.operateAuth.edit=!1,this.operateAuth.logoff=!1,this.operateAuth.locked=!1,this.operateAuth.role=!1,this.operateAuth.reset=!1,this.operateAuth.restore=!1,this.operateAuth.accept=!0,this.operateAuth.refuse=!0),this.userStatus=label,this.pageNo=1,this.getUserList(label)},statusEve:function(e,t,o,r){return"false"!=e.isLock?"已激活":"锁定"},loadNode:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t,o){var r,c,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,c={tenantId:0===t.level?"":t.data.tenantId,parentCode:0===t.level?-1:t.data.orgCode,userName:"",orgCode:"AHHF_QHHFY_99999997",showFlag:0,flag:""},e.next=4,n.a.post(n.a.forent_url.url+"/org/allSonOrgListincludeitself.mvc",c).then(function(e){if("success"==e.code){if(!e.data)return;return r.tempTreeData=e.data,l.tenantId=e.data[0].tenantId,l.orgCode=e.data[0].orgCode,l.orgObj=e.data[0],o(r.tempTreeData)}l.$message({type:"error",message:e.data.message})}).catch(function(e){l.$message({type:"error",message:"加载失败"})});case 4:case"end":return e.stop()}},e,this)}));return function(t,o){return e.apply(this,arguments)}}(),changePage:function(e){this.pageNo=e,this.getUserList(this.userStatus)},getUserList:function(e){var t=this,o={pageNo:this.pageInfo.pageNo,pageSize:this.pageInfo.pageSize,tenantId:this.tenantId,orgCode:"AHHF_QHHFY_99999997",showFlag:e,userName:"",flag:""},r="";return r=1==e||0==e?n.a.forent_url.url:n.a.forent_url.base_url,n.a.post(r+"/user/list.mvc",o).then(function(e){e.data,console.log("getUserList:res :",e),t.pageInfo.total=e.data.total,t.tableData=e.data.rows,t.listLoading=!1})},classIconLock:function(e){return"已激活"==this.formatIsLock(e.row)?"cloud-unlocked icon-l-new l-icons":"已锁定"==this.formatIsLock(e.row)?"cloud-locked icon-l-new l-icons":void 0},formatUserData:function(e){return e},formateUserList:function(e){if(e.length>0)for(var i=0;i<e.length;i++)for(var t in e[i])switch(t){case"id":case"loginName":case"password":case"name":case"sex":case"orgCode":case"orgName":case"roleName":case"cellphone":case"telephone":case"idNumber":case"email":case"registerDate":case"saveDate":case"deleteFlag":case"activateState":case"saveType":case"tenantId":case"belongRoleName":case"userType":case"pwdUpdateDate":case"isLock":case"lockType":case"lockDate":case"extendStr1":case"extendStr2":case"extendStr3":t,e[i][t]}return e},formatIsLock:function(e){var t=e.isLock;return""==t||null==t||"false"==t?"已激活":"已锁定"},formatRole:function(e){return"1"},testT:function(){}},watch:{tempTreeData:function(e,t){e!=t&&this.testT()},orgCode:function(e,t){}},filters:{statusEve:function(e,t,o,r){return"false"!=e?"已激活":"锁定"}}},x=(o(1526),o(31)),component=Object(x.a)(w,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-container",[o("el-main",[o("el-row",{staticClass:"header",attrs:{gutter:10}},[o("el-col",{staticClass:"title",attrs:{span:5}},[o("span",[e._v("专家管理")])]),e._v(" "),o("el-col",{staticClass:"right",attrs:{span:19}},[o("el-row",[o("el-col",{staticClass:"right",attrs:{span:12,offset:3}},[o("el-row",[o("el-col",{attrs:{span:24}},[o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleUserClick("add")}}},[e._v("新增")])],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:8,offset:1}},[o("el-input",{ref:"inputSearch",attrs:{clearable:"",placeholder:"请输入姓名查询关键字",size:"mini"},on:{change:e.handleSearch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.searchUserName,callback:function(t){e.searchUserName="string"==typeof t?t.trim():t},expression:"searchUserName"}},[o("i",{staticClass:"el-input__icon el-icon-search is-ableClick",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1)],1)],1),e._v(" "),o("el-row",{staticClass:"body"},[o("div",{staticClass:"userNotab"},[o("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"100%"}},[o("el-table-column",{attrs:{label:"序号",type:"index",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{label:"姓名",prop:"name"}}),e._v(" "),o("el-table-column",{attrs:{label:"用户名","show-overflow-tooltip":"",prop:"loginName"}}),e._v(" "),e.cloShow?o("el-table-column",{attrs:{label:"角色",width:"180",prop:"belongRoleName","show-overflow-tooltip":""}}):e._e(),e._v(" "),o("el-table-column",{attrs:{label:"状态",prop:"isLock",formatter:e.formatIsLock},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tag",{attrs:{type:"已激活"==e.formatIsLock(t.row)?"success":"danger","disable-transitions":""}},[e._v(e._s(e.formatIsLock(t.row)))])]}}])}),e._v(" "),o("el-table-column",{attrs:{"min-width":"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.operateAuth.edit,expression:"operateAuth.edit"}],attrs:{content:"编辑",placement:"bottom"}},[o("i",{staticClass:"ggicon-modification icon-l-new l-icons",on:{click:function(o){return e.handleUserClick("edit",e.orgObj,t.row)}}})]),e._v(" "),o("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.operateAuth.logoff,expression:"operateAuth.logoff"}],attrs:{content:"注销",placement:"bottom"}},[o("i",{staticClass:"ggicon-forbid icon-l-new l-icons",on:{click:function(o){return e.handleUserClick("remove",e.orgObj,t.row)}}})]),e._v(" "),o("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.operateAuth.locked,expression:"operateAuth.locked"}],attrs:{content:e.iconCont,placement:"bottom"}},[o("i",{class:e.classIconLock(t),on:{click:function(o){return e.handleUserClick("lock",e.orgObj,t.row)}}})]),e._v(" "),o("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.operateAuth.reset,expression:"operateAuth.reset"}],attrs:{content:"重置",placement:"bottom"}},[o("i",{staticClass:"ggicon-resets icon-l-new l-icons",on:{click:function(o){return e.handleUserClick("reset",e.orgObj,t.row)}}})]),e._v(" "),o("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.operateAuth.role,expression:"operateAuth.role"}],attrs:{content:"角色配置",placement:"bottom"}},[o("i",{staticClass:"ggicon-authority icon-l-new l-icons",on:{click:function(o){return e.handleUserClick("role",e.orgObj,t.row)}}})]),e._v(" "),o("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.operateAuth.restore,expression:"operateAuth.restore"}],attrs:{content:"还原",placement:"bottom"}},[o("i",{staticClass:"cloud-release icon-l-new l-icons",on:{click:function(o){return e.handleUserClick("restore",e.orgObj,t.row)}}})]),e._v(" "),o("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.operateAuth.accept,expression:"operateAuth.accept"}],attrs:{content:"同意申请",placement:"bottom"}},[o("i",{staticClass:"ggicon-agree icon-l-new l-icons",on:{click:function(o){return e.handleUserClick("accept",e.orgObj,t.row)}}})]),e._v(" "),o("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.operateAuth.refuse,expression:"operateAuth.refuse"}],attrs:{content:"拒绝申请",placement:"bottom"}},[o("i",{staticClass:"ggicon-disagree icon-l-new l-icons",on:{click:function(o){return e.handleUserClick("refuse",e.orgObj,t.row)}}})])]}}])})],1),e._v(" "),o("Pagination",{staticClass:"userPage",attrs:{widgetInfo:e.pageInfo},on:{sonHandleCurrentChange:e.sonHandleCurrentChange}})],1)])],1),e._v(" "),o("ModifyUser",{ref:"formModifyUser",attrs:{form:e.userObj,loginName:e.userObj.loginNameValidate,show:e.formObj.editFormVisible},on:{userPageListener:e.userPageListener}}),e._v(" "),o("ModifyRoleUser",{ref:"formModifyRoleUser",attrs:{form:e.userObj,show:e.formObj.roleFormVisible},on:{userPageListener:e.userPageListener}}),e._v(" "),o("AddUser",{attrs:{show:e.formObj.addFormVisible},on:{userPageListener:e.userPageListener}}),e._v(" "),o("RefuseUser",{attrs:{show:e.formObj.refuseFormVisible,userObj:e.userObj},on:{userPageListener:e.userPageListener}})],1)],1)},[],!1,null,"6b1213a8",null);t.default=component.exports}}]);