(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1186:function(e,r,t){"use strict";var o=t(6),l={name:"refuse-user",props:{show:{default:!0,require:!0},userObj:{type:Object,require:!0}},data:function(){return{ACCEPT_URL:"/user/acceptOrRefuse",myShow:this.show,form:""}},mounted:function(){},methods:{handleClose:function(){this.form="",this.$emit("userPageListener","RefuseUser",!1)},handleSubmit:function(){var e=this;o.a.post(o.a.forent_url.base_url+this.ACCEPT_URL,{currentUserId:o.a.getGlobalVal("userObj").id,userId:this.userObj.id,content:this.form,flag:"0"}).then(function(r){"success"==r.code&&e.$message({type:"success",message:r.message})}).catch(function(r){e.$message({type:"warn",message:"操作失败"})}),this.form=""}}},n=(t(1522),t(31)),component=Object(n.a)(l,function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"refuse-user"},[t("el-dialog",{attrs:{title:"拒绝用户",visible:e.show,width:"30%"},on:{close:e.handleClose}},[t("el-row",[t("el-col",[t("el-input",{attrs:{clearable:"",type:"textarea"},model:{value:e.form,callback:function(r){e.form="string"==typeof r?r.trim():r},expression:"form"}})],1)],1),e._v(" "),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1)],1)},[],!1,null,"fad56d68",null);r.a=component.exports},1187:function(e,r,t){"use strict";t(50);var o=t(321),l=(t(76),t(6)),n={name:"add-user",components:{RoleTree:t(1184).a},props:{show:{require:!0,default:!0,type:Boolean},userTypeShow:{default:!1,type:Boolean,require:!1}},data:function(){var e=this;return{VALIDATE_CHECKPSW_URL:"/user/checkPwdRules.mvc",VALIDATE_CHECKUSER_NAME_URL:"/user/judgeLoginName.mvc",ADDUSER_URL:"/user/addsave.mvc",GETROLELIST_URL:"/user/allroles.mvc",REG_PHONE:/^1[345789]\d{9}$/,myVisible:this.show,tree:[],form:Object(o.a)({loginName:"",password:"",confirmPsd:"",name:"",sex:"",cellphone:"",telephone:"",email:"",id:"",orgCode:"",selectedRoleIds:"",tenantId:"",userType:""},"selectedRoleIds",""),rules:{loginName:{required:!0,validator:function(r,t,o){t&&""!=t?t?l.a.post(l.a.forent_url.url+e.VALIDATE_CHECKUSER_NAME_URL,{loginName:t}).then(function(e){"error"==e.code?o(new Error(e.message)):o()}):o():o(new Error("用户名不能为空啊"))},trigger:"blur"},password:{required:!0,validator:function(r,t,o){""===t?o(new Error("密码不能为空")):t&&""!=t?l.a.post(l.a.forent_url.url+e.VALIDATE_CHECKPSW_URL,{pwd:t}).then(function(e){if("error"==e.code)return o(new Error(e.message));o()}):o()},trigger:"blur"},confirmPsd:{required:!0,validator:function(r,t,o){""===t?o(new Error("验证密码不能为空")):t!=e.form.password?o(new Error("两次密码不一致")):o(),o()},trigger:"blur"},name:{required:!0,validator:function(e,r,t){r?t():t(new Error("用户名不能为空"))},trigger:"blur"},sex:{required:!0,trigger:"blur",message:"性别不能为空"},cellphone:{required:!0,validator:function(r,t,o){var l=new RegExp(e.REG_PHONE).test(t);""===t?o(new Error("手机号不能为空")):l?o():o(new Error("不是有效手机号码"))},trigger:"blur"},telephone:"",email:"",id:"",orgCode:"",selectedRoleIds:"",tenantId:"",userType:{require:this.userTypeShow,validator:function(e,r,t){this.userTypeShow?""===r?t(new Error("必须选择用户类型")):void 0===r?t(new Error("必须选择用户类型")):t():t()},trigger:"change",message:"用户类型不能为空"}},defaultProps:{children:"children",label:"title"}}},computed:{treeFiltered:function(){return[]}},mounted:function(){this.myVisible=!0},methods:{userPageListener:function(e,data){"roleTreeChange"&&(this.form.selectedRoleIds=data)},handleClose:function(){this.$emit("userPageListener","AddUser",!1),this.$refs.addform.resetFields(),this.$refs.addform.clearValidate()},handleSubmit:function(){var e=this;this.$refs.addform.validate(function(r){if(r){var t={cellphone:e.form.cellphone,confirmPsd:e.form.confirmPsd,email:e.form.email,id:e.form.id,loginName:e.form.loginName,name:e.form.name,orgCode:l.a.getGlobalVal("userObj").orgCode,password:e.form.password,selectedRoleIds:e.form.selectedRoleIds,sex:e.form.sex,telephone:e.form.telephone,tenantId:e.form.tenantId,userType:e.form.userType};l.a.post(l.a.forent_url.url+e.ADDUSER_URL,t).then(function(r){"success"==r.code&&(e.$message({type:"success",message:"修改成功"}),e.$emit("userPageListener","AddUser",r.data),e.$refs.addform.resetFields())}).catch(function(r){console.error("err",r),e.$message({type:"warn",message:"修改失败"})})}})},handleNodeClick:function(){}},watch:{myVisible:function(){}}},c=(t(1520),t(31)),component=Object(c.a)(n,function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"add-user"},[t("el-dialog",{attrs:{title:"添加用户",visible:e.show,width:"50%"},on:{close:e.handleClose}},[t("el-row",[t("el-col",{attrs:{span:13}},[t("el-form",{ref:"addform",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[t("el-form-item",{attrs:{label:"用户名",prop:"loginName"}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.loginName,callback:function(r){e.$set(e.form,"loginName","string"==typeof r?r.trim():r)},expression:"form.loginName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{clearable:"",type:"password"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password","string"==typeof r?r.trim():r)},expression:"form.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"确认密码",prop:"confirmPsd"}},[t("el-input",{attrs:{clearable:"",type:"password"},model:{value:e.form.confirmPsd,callback:function(r){e.$set(e.form,"confirmPsd","string"==typeof r?r.trim():r)},expression:"form.confirmPsd"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name","string"==typeof r?r.trim():r)},expression:"form.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-col",{attrs:{span:13}},[t("el-radio",{attrs:{span:6,label:"1"},model:{value:e.form.sex,callback:function(r){e.$set(e.form,"sex","string"==typeof r?r.trim():r)},expression:"form.sex"}},[e._v("男")]),e._v(" "),t("el-radio",{attrs:{span:6,label:"2"},model:{value:e.form.sex,callback:function(r){e.$set(e.form,"sex","string"==typeof r?r.trim():r)},expression:"form.sex"}},[e._v("女")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"办公电话",prop:"telephone"}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.telephone,callback:function(r){e.$set(e.form,"telephone","string"==typeof r?r.trim():r)},expression:"form.telephone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"移动电话",prop:"cellphone"}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.cellphone,callback:function(r){e.$set(e.form,"cellphone","string"==typeof r?r.trim():r)},expression:"form.cellphone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{clearable:""},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email","string"==typeof r?r.trim():r)},expression:"form.email"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.userTypeShow,expression:"userTypeShow"}],attrs:{label:"用户类型",prop:"userType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择用户类型"},model:{value:e.form.userType,callback:function(r){e.$set(e.form,"userType","string"==typeof r?r.trim():r)},expression:"form.userType"}},[t("el-option",{key:"0",attrs:{label:"上级机构",value:"0"}},[e._v("上级机构")]),e._v(" "),t("el-option",{key:"1",attrs:{label:"下级机构",value:"1"}},[e._v("下级机构")])],1)],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:11}},[t("RoleTree",{ref:"roleTree",attrs:{height:"464px"},on:{userPageListener:e.userPageListener}})],1)],1),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保 存")])],1)],1)},[],!1,null,"44cb1088",null);r.a=component.exports},1188:function(e,r,t){"use strict";var o=t(6),l=t(483),n={name:"modify-role-user",props:{modifyRoleFormVisible:{},form:{},rules:{},show:{default:!0}},data:function(){return{checkedArr:[],formLabelWidth:"120px",formVisble:this.show,roleTree:[],defaultProps:{children:"children",label:"title",disabled:"chkDisabled"}}},mounted:function(){this.initList()},methods:{handleClose:function(e){this.$emit("userPageListener","ModifyRoleUser",!1)},handleSubmit:function(){var e=this,r=this.$refs.role_tree.getCheckedKeys().join(","),t={id:this.form.id,selectedRoleIds:r};o.a.post(o.a.forent_url.url+"/user/roleConfig.mvc",t).then(function(r){"success"===r.code&&(e.$message({type:"success",message:"角色修改成功"}),e.$emit("userPageListener","ModifyRoleUser",!0))}).catch(function(r){e.$message({type:"warn",message:"角色修改失败"})}),this.handleClose(!0)},handleNodeCheckChange:function(e,r){var t=e.id;!this.checkedArr.indexOf(t)>=0&&r&&this.checkedArr.push(t)},initList:function(){var e=this,r={id:this.form.id};o.a.post(o.a.forent_url.url+"/user/allroles.mvc",r).then(function(r){if("success"==r.code){var data=[];r.data.forEach(function(e,r){!e.chkDisabled&&e.checked&&data.push(e.id)}),e.roleTree=l.a.formatJSONTreeData(r.data,"children","id","parentId"),e.checkedArr=data}}).catch(function(r){e.$message({type:"info",message:"加载失败!"})})},formatJSON:function(e){var r=[],t={};function o(e,data){var r={checked:data.checked,children:[],chkDisable:data.chkDisable,hasCheck:data.hasCheck,id:data.id,leaf:data.leaf,parentId:data.parentId,text:data.text,title:data.title};t[data.id]=r,e.push(r)}return e.forEach(function(e){t[e.parentId]?o(t[e.parentId].children,e):o(r,e)}),r}},watch:{show:function(){this.visible=this.show}}},c=(t(1516),t(31)),component=Object(c.a)(n,function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-container",[t("el-dialog",{attrs:{title:"角色配置",visible:e.show,"before-close":e.handleClose,width:"40%","custom-class":"dialog"}},[t("el-row",[t("el-col",{attrs:{span:21,offset:3}},[t("el-scrollbar",{staticStyle:{height:"220px"}},[t("el-tree",{ref:"role_tree",attrs:{"default-expand-all":"","node-key":"id",props:e.defaultProps,data:e.roleTree,"default-checked-keys":e.checkedArr,"show-checkbox":""},on:{"check-change":e.handleNodeCheckChange}})],1)],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保 存")])],1)],1)],1)},[],!1,null,"449b3016",null);r.a=component.exports},1189:function(e,r,t){"use strict";t(50);var o=t(6),l=t(483),n={name:"modify-user",props:{modifyUserFormVisible:{},loginName:"",form:{},show:{default:!0},userTypeShow:{default:!1,type:Boolean,require:!1}},data:function(){var e=this;return{VALIDATE_CHECKPSW_URL:"/user/checkPwdRules.mvc",VALIDATE_CHECKUSER_NAME_URL:"/user/judgeLoginName.mvc",REG_PHONE:/^1[345789]\d{9}$/,formLabelWidth:"30%",formVisibel:this.show,passwordHasinput:!1,isSuccess:!1,rules:{loginName:{required:!0,validator:function(r,t,l){t&&""!=t?t?t==e.loginName?l():o.a.post(o.a.forent_url.url+e.VALIDATE_CHECKUSER_NAME_URL,{loginName:t}).then(function(e){"error"==e.code?l(new Error("用户名已存在")):l()}):l():l(new Error("用户名不能为空"))},message:"登录名不能为空",trigger:"blur"},newPassword:{required:!1,validator:function(r,t,o){e.passwordHasinput?""!=t&&t?o():o(new Error("确认密码不能为空")):o()},trigger:"blur"},confirmPassword:{required:!1,validator:function(r,t,o){e.passwordHasinput?""==t?o(new Error("确认密码不能为空")):t!=e.formObj.newPassword?o(new Error("密码不一致")):o():o()},trigger:"blur"},name:{required:!0,trigger:"blur",message:"姓名不能为空"},sex:{required:!0,trigger:"blur",message:"性别不能为空"},telephone:{},cellphone:{required:!0,validator:function(r,t,o){""===t?o(new Error("手机号不能为空")):e.REG_PHONE.test(t)?o():o(new Error("不是有效手机号码"))},trigger:"blur"},email:{}},formObj:{id:"",orgCode:"",tenantId:"",selectedRoleIds:"",loginName:"",password:"",newPassword:"",confirmPassword:"",name:"",sex:"",cellphone:"",telephone:"",email:"",userType:""}}},watch:{},beforeMount:function(){},mounted:function(){this.formObj=l.a.deepCopy(this.form)},methods:{inputEvent:function(e){""==this.formObj.newPassword&&""==this.formObj.confirmPassword?(this.rules.newPassword.required=!1,this.rules.confirmPassword.required=!1,this.passwordHasinput=!1,this.$nextTick(function(){this.$refs.form.clearValidate()})):(this.passwordHasinput=!0,this.rules.newPassword.required=!0,this.rules.confirmPassword.required=!0)},handleClose:function(e){e?this.$emit("userPageListener","ModifyUser",e.data,e.index):this.$emit("userPageListener","ModifyUser"),this.$refs.form.resetFields()},handleSubmit:function(){var e=this;this.$refs.form.validate(function(r){if(r){var t={id:e.formObj.id,orgCode:e.formObj.orgCode,tenantId:e.formObj.tenantId,selectedRoleIds:"",loginName:e.formObj.loginName,password:e.formObj.password,newPsd:e.formObj.newPassword,confirmPassword:e.formObj.confirmPassword,name:e.formObj.name,sex:e.formObj.sex,cellphone:e.formObj.cellphone,telephone:e.formObj.telephone,email:e.formObj.email,userType:e.formObj.userType};o.a.post(o.a.forent_url.url+"/user/editsave.mvc",t).then(function(r){"success"==r.code&&(e.$message({type:"success",message:"修改成功"}),e.handleClose({data:r.data,index:e.formObj.index}))}).catch(function(r){e.$message({type:"warn",message:"修改失败"})})}})},handleValidate:function(){o.a.post(o.a.forent_url.url+"/user/checkPwdRules.mvc",validateParams)}}},c=(t(1514),t(31)),component=Object(c.a)(n,function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"modify-user"},[t("el-dialog",{attrs:{title:"修改信息",visible:e.show,width:"40%"},on:{close:e.handleClose}},[t("el-form",{ref:"form",attrs:{model:e.formObj,rules:e.rules}},[t("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"loginName"}},[t("el-col",{attrs:{span:16}},[t("el-input",{attrs:{clearable:"",autocomplete:"off",placeholder:"请选择用户名"},model:{value:e.formObj.loginName,callback:function(r){e.$set(e.formObj,"loginName","string"==typeof r?r.trim():r)},expression:"formObj.loginName"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"新密码","label-width":e.formLabelWidth,prop:"newPassword"}},[t("el-col",{attrs:{span:16}},[t("el-input",{attrs:{clearable:"",type:"password",autocomplete:"off",placeholder:"请输入新密码"},on:{blur:function(r){return e.inputEvent(e.formObj.newPassword)}},model:{value:e.formObj.newPassword,callback:function(r){e.$set(e.formObj,"newPassword","string"==typeof r?r.trim():r)},expression:"formObj.newPassword"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth,prop:"confirmPassword"}},[t("el-col",{attrs:{span:16}},[t("el-input",{attrs:{clearable:"",type:"password",autocomplete:"off",placeholder:"请再次输入密码"},model:{value:e.formObj.confirmPassword,callback:function(r){e.$set(e.formObj,"confirmPassword","string"==typeof r?r.trim():r)},expression:"formObj.confirmPassword"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth,prop:"name"}},[t("el-col",{attrs:{span:16}},[t("el-input",{attrs:{clearable:"",autocomplete:"off",placeholder:"请输入姓名"},model:{value:e.formObj.name,callback:function(r){e.$set(e.formObj,"name","string"==typeof r?r.trim():r)},expression:"formObj.name"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth,prop:"sex"}},[t("el-col",{staticStyle:{"text-align":"left"},attrs:{span:10,offset:1}},[t("el-radio-group",{model:{value:e.formObj.sex,callback:function(r){e.$set(e.formObj,"sex","string"==typeof r?r.trim():r)},expression:"formObj.sex"}},[t("el-radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),t("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"办公电话","label-width":e.formLabelWidth,prop:"telephone"}},[t("el-col",{attrs:{span:16}},[t("el-input",{attrs:{clearable:"",autocomplete:"off",placeholder:"请输入办公电话"},model:{value:e.formObj.telephone,callback:function(r){e.$set(e.formObj,"telephone","string"==typeof r?r.trim():r)},expression:"formObj.telephone"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{prop:"cellphone",label:"移动电话","label-width":e.formLabelWidth}},[t("el-col",{attrs:{span:16}},[t("el-input",{attrs:{clearable:"",autocomplete:"off",placeholder:"请输入移动电话"},model:{value:e.formObj.cellphone,callback:function(r){e.$set(e.formObj,"cellphone","string"==typeof r?r.trim():r)},expression:"formObj.cellphone"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{prop:"email",label:"邮箱","label-width":e.formLabelWidth}},[t("el-col",{attrs:{span:16}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入邮箱"},model:{value:e.formObj.email,callback:function(r){e.$set(e.formObj,"email","string"==typeof r?r.trim():r)},expression:"formObj.email"}})],1)],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.userTypeShow,expression:"userTypeShow"}],attrs:{label:"用户类型",prop:"userType","label-width":e.formLabelWidth}},[t("el-col",{attrs:{span:16}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择用户类型"},model:{value:e.formObj.userType,callback:function(r){e.$set(e.formObj,"userType","string"==typeof r?r.trim():r)},expression:"formObj.userType"}},[t("el-option",{key:0,attrs:{label:"上级机构",value:0}},[e._v("上级机构")]),e._v(" "),t("el-option",{key:1,attrs:{label:"下级机构",value:1}},[e._v("下级机构")])],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保 存")])],1)],1)],1)},[],!1,null,"96aafe4a",null);r.a=component.exports},1250:function(e,r,t){var content=t(1515);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(17).default)("2748f268",content,!0,{sourceMap:!1})},1251:function(e,r,t){var content=t(1517);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(17).default)("171880f2",content,!0,{sourceMap:!1})},1253:function(e,r,t){var content=t(1521);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(17).default)("427fe0bf",content,!0,{sourceMap:!1})},1254:function(e,r,t){var content=t(1523);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(17).default)("ddb0fc2e",content,!0,{sourceMap:!1})},1514:function(e,r,t){"use strict";var o=t(1250);t.n(o).a},1515:function(e,r,t){(e.exports=t(16)(!1)).push([e.i,"",""])},1516:function(e,r,t){"use strict";var o=t(1251);t.n(o).a},1517:function(e,r,t){(e.exports=t(16)(!1)).push([e.i,"",""])},1520:function(e,r,t){"use strict";var o=t(1253);t.n(o).a},1521:function(e,r,t){(e.exports=t(16)(!1)).push([e.i,"",""])},1522:function(e,r,t){"use strict";var o=t(1254);t.n(o).a},1523:function(e,r,t){(e.exports=t(16)(!1)).push([e.i,"",""])}}]);