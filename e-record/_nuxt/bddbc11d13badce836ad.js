(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1352:function(t,e,l){var content=l(1698);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(17).default)("251b131a",content,!0,{sourceMap:!1})},1697:function(t,e,l){"use strict";var o=l(1352);l.n(o).a},1698:function(t,e,l){(t.exports=l(16)(!1)).push([t.i,".right-main-warpper[data-v-73114236]{background:#fff}.right-main-warpper .search-bar-wrapper[data-v-73114236]{padding-top:8px}.right-main-warpper .search-bar-wrapper .el-select[data-v-73114236]{width:100%}.right-main-warpper .el-button+.el-button[data-v-73114236]{margin-left:5px}.right-main-warpper[data-v-73114236] .demo-table-expand{font-size:0}.right-main-warpper[data-v-73114236] .demo-table-expand.dialog-expand .el-form-item{margin-bottom:8px}.right-main-warpper[data-v-73114236] .demo-table-expand.dialog-expand .el-form-item label{color:#0d87d4;text-align:left}.right-main-warpper[data-v-73114236] .demo-table-expand.dialog-expand .el-form-item .el-form-item__content{width:calc(100% - 20px)}.right-main-warpper[data-v-73114236] .demo-table-expand .el-form-item{margin-right:0;margin-bottom:0;width:25%}.right-main-warpper[data-v-73114236] .demo-table-expand .el-form-item label{width:110px;text-align:right;padding-left:5px;color:#99a9bf;display:inline-block}.right-main-warpper[data-v-73114236] .demo-table-expand .el-form-item .el-form-item__content{height:43px;width:calc(100% - 120px)}.right-main-warpper[data-v-73114236] .demo-table-expand .el-form-item .el-form-item__content .span-show{height:32px;display:inline-block;width:auto;max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.right-main-warpper .row-bg[data-v-73114236]{padding:15px 0 10px}.right-main-warpper .showHide[data-v-73114236]{display:none}.notab[data-v-73114236]{border-top:none}.task-list-content[data-v-73114236]{background:#fff;padding:5px}.task-list-content .task-list-top[data-v-73114236]{text-align:right;margin:5px 0;vertical-align:top}.task-list-content .task-list-top .el-button--primary[data-v-73114236]{vertical-align:top}.task-list-content .height-200[data-v-73114236]{padding:30px 0}.height-300[data-v-73114236]{max-height:560px;overflow-y:auto;overflow-x:hidden}[data-v-73114236] .el-table .el-table__body-wrapper{height:calc(100vh - 360px);overflow-y:auto}",""])},1839:function(t,e,l){"use strict";l.r(e);l(316);var o=l(6),n=l(1148),r=(l(51),l(1147)),d=l(1196),c=l(1197),h=l(1198),m={components:{Title:n.a,Pagination:r.a,Upload:d.a,EditUpload:c.a,OtherUpload:h.a},data:function(){return{menuKey:1000001,operationOrgId:"",unitId:"",selectedOptions:["1"],dialogAddVisible:!1,dialogEditVisible:!1,dialogOtherVisible:!1,formLabelWidth:"120px",plan:{},widgetInfo:{total:null,pageSize:12,pageNo:1},tableData:[],isLoading:!1,orgList:[],orgListValue:"",allUnitList:[],allUnitListVal:"",allUserList:[],allUserListVal:"",priorityList:[{id:"0003",value:"",label:"全部"},{id:"0001",value:"1",label:"紧急"},{id:"0002",value:"2",label:"普通"}],priorityListVal:"",oprFlagList:[{id:"00001",value:"",label:"全部"},{id:"00002",value:"1",label:"新建"},{id:"00003",value:"2",label:"修改"},{id:"00004",value:"3",label:"删除"},{id:"00005",value:"4",label:"补录"}],oprFlagListVal:"",recordStatusList:[{id:"001",value:"",label:"全部"},{id:"002",value:"1",label:"初审中"},{id:"003",value:"2",label:"初审驳回"},{id:"004",value:"3",label:"复审中"},{id:"005",value:"4",label:"复审驳回"},{id:"006",value:"5",label:"建档中"},{id:"007",value:"6",label:"建档驳回"},{id:"008",value:"7",label:"建档审核"}],recordStatusListVal:"",describesVal:"",uploadDataVal:{},editUploadData:{},otherUpload:{},roleName:null,roleId:null,userId:null,loading:!1}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.roleName=localStorage.getItem("roleName"),t.roleId=localStorage.getItem("roleId"),t.userId=localStorage.getItem("userId"),t.getOrgListByUserId()})},watch:{},methods:{changeSubVal:function(){this.allUnitListVal=null},changeUnitVal:function(){var t=this;return this.orgListValue=this.allUnitList.find(function(e){return e.value==t.allUnitListVal}).subCenterCode},getOrgListByUserId:function(){var t=this,e=this;o.a.post("/remoteApi/tool/org/findOrgListByRole",{userId:localStorage.getItem("userId"),roleName:localStorage.getItem("roleName")},5e3).then(function(l){"success"===l.code?l.data&&l.data.length>0&&(e.orgList=[],l.data.map(function(t){e.orgList.push({label:t.orgName,value:t.orgCode})})):t.$message({type:"warning",message:"错误"})}).catch(function(e){t.$message({type:"warning",message:e})})},getAllUnit:function(){var t=this,e=this;e.allUnitList=[],this.loading=!0,o.a.post("/remoteApi/tool/unit/findAllUnit",{subCenterCode:this.orgListValue},5e3).then(function(l){"success"===l.code&&(t.loading=!1,l.data&&l.data.length>0&&(e.allUnitList=[{label:"全部",value:"",subCenterCode:""}],l.data.map(function(t){e.allUnitList.push({label:t.label,value:t.value,subCenterCode:t.subCenterCode})})))}).catch(function(e){t.$message({type:"warning",message:e})})},findDetail:function(t,e){e.limtShow=!0,this._Storage.setObj("fileItem","obj",e),this.$router.push({name:"PatrolPlan-FacilitiesDetail",params:{row:e}}),localStorage.setItem("unitId",e.unitId),localStorage.setItem("uploadData",e.unitId),localStorage.setItem("routerFlag","routerFlagOne")},showButton:function(t,e){return t.indexOf(e)>-1},resetHandel:function(){this.describesVal=null,this.orgListValue=null,this.allUnitListVal=null,this.allUserListVal=null,this.priorityListVal=null,this.oprFlagListVal=null,this.recordStatusListVal=null,this.loadData("search")},saveHandelNewAdd:function(){this.dialogAddVisible=!1,this.loadData("search")},saveHandelEdit:function(){this.dialogEditVisible=!1,this.loadData("search")},showLabel:function(t,e){return e.find(function(e){return e.value==t}).label},loadData:function(t){var e=this;e.isLoading=!0,o.a.post("/remoteApi/tool/recordTrial/findRecordTrialList",{pageSize:e.widgetInfo.pageSize,pageNo:"search"==t?"1":e.widgetInfo.pageNo,subCenterCode:e.orgListValue,unitId:e.allUnitListVal,createdBy:e.allUserListVal,recordStatus:e.recordStatusListVal,describes:e.describesVal,priority:e.priorityListVal,oprFlag:e.oprFlagListVal,roleNames:localStorage.getItem("roleName"),userId:localStorage.getItem("userId")},5e3).then(function(t){"success"===t.code?(e.isLoading=!1,e.tableData=t.data.rows,e.widgetInfo.total=null==t.data.total?0:t.data.total,e.widgetInfo.pageSize=t.data.pageSize,e.widgetInfo.pageNo=t.data.pageNo):(e.isLoading=!1,e.$message({type:"warning",message:t.rspMsg}))}).catch(function(t){e.isLoading=!1,e.$message({type:"warning",message:t})})},submitAddBtn:function(){this.dialogAddVisible=!0,this.uploadDataVal.type="newAdd",this.uploadDataVal.timestamp=(new Date).getTime(),console.log(this.uploadDataVal.timestamp)},handleClose:function(){this.dialogAddVisible=!1,this.$refs.myChild.close()},sonHandleCurrentChange:function(t){this.widgetInfo.pageSize=t.pageSize?parseInt(t.pageSize):this.widgetInfo.pageSize,this.widgetInfo.pageNo=t.pageNo?parseInt(t.pageNo):this.widgetInfo.pageNo,this.loadData("load")},jumpLinkPage:function(t,e){this.$router.push({name:"PatrolPlan-addElectronic",params:{unitId:e.unitId,fileId:e.id,subCenterCode:e.subCenterCode,show:!0}})},handleUpload:function(t,e){console.log(t,e),this.dialogOtherVisible=!0}}},f=(l(1697),l(31)),component=Object(f.a)(m,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("div",{staticClass:"right-main-warpper"},[l("div",{staticClass:"h2-title-wrap"},[l("h2",{staticClass:"tilte-h2"},[t._v("任务列表")]),t._v(" "),l("div",{staticClass:"title-btn-wrap"},["超级管理员"==t.roleName||"提交人员"==t.roleName?[l("el-button",{attrs:{type:"success"},on:{click:t.submitAddBtn}},[l("i",{staticClass:"el-icon-plus"}),t._v("新增\n          ")])]:t._e()],2)]),t._v(" "),l("div",{staticClass:"search-bar-wrapper"},[l("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[l("el-form-item",{attrs:{label:"所属运营中心:"}},[l("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{change:function(e){return t.changeSubVal()},focus:t.getOrgListByUserId},model:{value:t.orgListValue,callback:function(e){t.orgListValue=e},expression:"orgListValue"}},t._l(t.orgList,function(t,e){return l("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),l("el-form-item",{attrs:{label:"企业名称:"}},[l("el-select",{attrs:{placeholder:"请选择",filterable:"",loading:t.loading},on:{focus:t.getAllUnit,change:function(e){return t.changeUnitVal()}},model:{value:t.allUnitListVal,callback:function(e){t.allUnitListVal=e},expression:"allUnitListVal"}},t._l(t.allUnitList,function(t,e){return l("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),l("el-form-item",{attrs:{label:"任务描述:"}},[l("el-input",{model:{value:t.describesVal,callback:function(e){t.describesVal=e},expression:"describesVal"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"上传人:"}},[l("el-input",{model:{value:t.allUserListVal,callback:function(e){t.allUserListVal=e},expression:"allUserListVal"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"优先级:"}},[l("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.priorityListVal,callback:function(e){t.priorityListVal=e},expression:"priorityListVal"}},t._l(t.priorityList,function(t){return l("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),l("el-form-item",{attrs:{label:"任务类型:"}},[l("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.oprFlagListVal,callback:function(e){t.oprFlagListVal=e},expression:"oprFlagListVal"}},t._l(t.oprFlagList,function(t){return l("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),l("el-form-item",{attrs:{label:"任务状态:"}},[l("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.recordStatusListVal,callback:function(e){t.recordStatusListVal=e},expression:"recordStatusListVal"}},t._l(t.recordStatusList,function(t){return l("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),l("el-form-item",{staticClass:"t-right",staticStyle:{"text-align":"left"},attrs:{label:" "}},[l("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.loadData("search")}}},[t._v("查询")]),t._v(" "),l("el-button",{on:{click:t.resetHandel}},[t._v("重置")])],1)],1)],1),t._v(" "),l("div",{staticClass:"newTable"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"table",attrs:{data:t.tableData,stripe:""}},[l("el-table-column",{attrs:{align:"left","min-width":"15%","show-overflow-tooltip":!0,prop:"describes",label:"任务描述"}}),t._v(" "),l("el-table-column",{attrs:{align:"left","min-width":"10%","show-overflow-tooltip":!0,pageSize:"pageSize",prop:"unitName",label:"企业名称"}}),t._v(" "),l("el-table-column",{attrs:{align:"left","min-width":"12%","show-overflow-tooltip":!0,prop:"orgName",label:"运营中心名称"}}),t._v(" "),l("el-table-column",{attrs:{align:"left","min-width":"9%","show-overflow-tooltip":!0,prop:"userName",label:"上传人"}}),t._v(" "),l("el-table-column",{attrs:{align:"center","min-width":"9%",prop:"priority",label:"优先级",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-tag",{attrs:{type:1===e.row.priority?"danger":"primary","disable-transitions":""}},[t._v(t._s(1===e.row.priority?"紧急":"普通"))])]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center","min-width":"10%",prop:"oprFlag",label:"任务类型",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.showLabel(e.row.oprFlag,t.oprFlagList)))]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"left","min-width":"10%",prop:"recordStatus",label:"任务状态",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.showLabel(e.row.recordStatus,t.recordStatusList)))]}}])}),t._v(" "),l("el-table-column",{attrs:{align:"center","min-width":"15%",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){return t.findDetail(e.$index,e.row)}}},[t._v("查看详情")])]}}])})],1)],1),t._v(" "),l("Pagination",{attrs:{widgetInfo:t.widgetInfo},on:{sonHandleCurrentChange:t.sonHandleCurrentChange}})],1),t._v(" "),l("el-dialog",{staticClass:"newDigWrap",attrs:{title:"新增",visible:t.dialogAddVisible,"close-on-press-escape":!1,"close-on-click-modal":!1,width:"580px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogAddVisible=e}}},[l("div",{staticClass:"height-300"},[l("Upload",{ref:"myChild",attrs:{uploadDataVal:t.uploadDataVal},on:{saveHandel:t.saveHandelNewAdd}})],1)]),t._v(" "),l("el-dialog",{attrs:{title:"编辑",visible:t.dialogEditVisible},on:{"update:visible":function(e){t.dialogEditVisible=e}}},[l("div",{staticClass:"height-300"},[l("EditUpload",{attrs:{editUploadData:t.editUploadData},on:{saveHandel:t.saveHandelEdit}})],1)])],1)},[],!1,null,"73114236",null);e.default=component.exports}}]);