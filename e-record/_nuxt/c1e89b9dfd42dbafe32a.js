(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1347:function(t,e,c){var content=c(1688);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,c(17).default)("ec66feae",content,!0,{sourceMap:!1})},1687:function(t,e,c){"use strict";var n=c(1347);c.n(n).a},1688:function(t,e,c){(t.exports=c(16)(!1)).push([t.i,'[v-cloak][data-v-0a857cc6]{display:none}.allDiv[data-v-0a857cc6]{display:inline-block}.box-icon[data-v-0a857cc6]{position:absolute;bottom:-1px;right:-2px;font-size:18px}.iconAll[data-v-0a857cc6]{vertical-align:super}.iconSize[data-v-0a857cc6]{font-size:16px}.iconBig[data-v-0a857cc6]{font-size:5.6rem;text-shadow:.4rem .6rem .7rem hsla(0,0%,70.6%,.3)}.colorIcon[data-v-0a857cc6]{color:#9f9f9f}.boxIcon[data-v-0a857cc6]{position:relative;height:150px;width:18.7%;margin-right:1%;margin-bottom:1.5rem;text-align:center;border:.1rem solid hsla(0,0%,62.4%,.7);box-shadow:.1rem .2rem .4rem 0 hsla(0,0%,48.6%,.3);vertical-align:top;cursor:pointer}.mainBox[data-v-0a857cc6]{width:100%;background-color:#fff;display:-webkit-box;display:flex;margin-top:10px;padding:20px 0 10px 10px;flex-wrap:wrap}html[data-v-0a857cc6]{overflow-x:hidden}.solid-collapse[data-v-0a857cc6]:after{content:"";position:absolute;top:12%;bottom:0;left:12%;width:1px;height:80%;background-color:#d9d9d9}.map[data-v-0a857cc6]{margin-top:1rem}.list-all[data-v-0a857cc6]{padding-left:.4rem}.gg-submit-detail[data-v-0a857cc6]:before{content:"";position:absolute;top:-.8rem;left:100px;display:block;width:1.4rem;height:1.4rem;background-color:#fff;border-left:.1rem solid #347ff3;border-top:.1rem solid #347ff3;-webkit-transform:rotate(45deg);transform:rotate(45deg);box-shadow:-.1rem -.1rem .1rem 0 rgba(0,166,90,.3)}.overstriking[data-v-0a857cc6]{font-weight:600}.all-list[data-v-0a857cc6]{border:1px solid #2072f2!important}.text-color[data-v-0a857cc6]{color:#1a1a1a!important}.ggicon-list[data-v-0a857cc6]:before{content:"\\E902";color:#0caa62}.ggicon-building[data-v-0a857cc6]:before{content:"\\e900";color:#0caa62}.sizeContent[data-v-0a857cc6]{padding-left:.1rem}.minIcon[data-v-0a857cc6]{position:absolute;right:-1px;bottom:-2px}.forbid_submit[data-v-0a857cc6]{cursor:no-drop!important}.bigBoox[data-v-0a857cc6]{height:40rem;padding:0;border:.1rem solid #347ff3;margin:-13px;box-shadow:0 0 .5rem #347ff3;overflow:auto;overflow-x:hidden}.minRidus[data-v-0a857cc6]{display:inline-block;width:20px;height:20px;text-align:center;line-height:20px;position:relative;font-size:1.4rem;top:-.8rem;right:0;border-radius:50%;background-color:red;color:#fff}.active[data-v-0a857cc6]{color:#2072f2!important;border:1px solid #2072f2!important;background-color:#e7effb!important}.iconActive[data-v-0a857cc6]{color:#2072f2}.list-content[data-v-0a857cc6]:first-child{margin-left:0}.list-content[data-v-0a857cc6]{width:5rem;height:5rem;line-height:5rem;color:#999}.list-content[data-v-0a857cc6],.list-content-car[data-v-0a857cc6]{position:relative;border:1px solid #dadada;margin:2rem 0 2rem 1rem;text-align:center;cursor:pointer}.list-content-car[data-v-0a857cc6]{width:42px;height:30px;line-height:30px;flex-wrap:wrap}.floorContent[data-v-0a857cc6]{padding-left:25px}.floorContent[data-v-0a857cc6],.floorContent-car[data-v-0a857cc6]{width:100%;display:-webkit-box;display:flex;flex-wrap:wrap;border-bottom:.1rem solid #ededed}.floorContent-car[data-v-0a857cc6]{padding-left:15px}.locationIcon[data-v-0a857cc6]{position:absolute;right:-1px;bottom:-2px}.checked[data-v-0a857cc6]{color:#2072f2!important}.floorHeader[data-v-0a857cc6]{height:5rem;line-height:5rem;border-bottom:1px solid #eaeaea}.floorHeader-car[data-v-0a857cc6]{height:4rem;line-height:4rem}.floorListR[data-v-0a857cc6]{float:right;font-size:18px;padding-right:3.2rem;cursor:pointer;color:#999}.el-main[data-v-0a857cc6]{padding:0;text-align:none;overflow-y:auto;overflow-x:hidden!important}.floorListL[data-v-0a857cc6]{float:left;font-size:18px;padding-left:2rem;color:#616161}.floorMain[data-v-0a857cc6]{width:100%;background-color:#fff;margin:1rem 0}.floor-list[data-v-0a857cc6]{width:100%}.grid-content[data-v-0a857cc6]{line-height:3}.btnList[data-v-0a857cc6]{margin-left:10%;vertical-align:super}.leftList[data-v-0a857cc6]{padding-left:30%}.el-icon-back[data-v-0a857cc6]{position:absolute;left:30px;top:7px;width:30%}.listName[data-v-0a857cc6]{padding-left:2rem;font-size:18px;vertical-align:middle}.listSwitch[data-v-0a857cc6]{padding-left:.8rem;padding-right:.8rem;font-size:18px;vertical-align:text-top;text-align:center;cursor:pointer}.el-row[data-v-0a857cc6]{margin-bottom:20px}.el-row[data-v-0a857cc6]:last-child{margin-bottom:0}.el-col[data-v-0a857cc6]{border-radius:4px}.bg-purple-dark[data-v-0a857cc6]{background:#99a9bf}.bg-purple[data-v-0a857cc6]{background:#d3dce6}.bg-purple-light[data-v-0a857cc6]{background:#e5e9f2}.grid-content[data-v-0a857cc6]{border-radius:4px;min-height:36px}.row-bg[data-v-0a857cc6]{padding:10px 0;background-color:#f9fafc}',""])},1842:function(t,e,c){"use strict";c.r(e);c(61),c(76),c(50),c(222);var n=c(40),o=(c(21),c(6)),r=(c(51),{data:function(){return{allFlag:null,ZS:{},MONITOR:{},floorList:[],listName:"转换列表",isPending:!1,visibles:!1,bigFlag:!1,bigIcon:"icon-enlarge",flag:!0,listFlag:!1,listData:this.$route.params,name:"",checked:"",icon:{"01000000":"ggicon-facility","02000000":"ggicon-forewarning","03000000":"ggicon-powerUp","04000000":"ggicon-fire","05000000":"ggicon-water","06000000":"ggicon-fireHydrant","07000000":"ggicon-fireExtinguishingSprinkler","08000000":"ggicon-foamFire-fighting","09000000":"ggicon-gasFireControl",10000000:"ggicon-fan",11000000:"ggicon-illumination",12000000:"ggicon-trumpet",13000000:"ggicon-telphone",14000000:"ggicon-fireSeparationFacility",15000000:"ggicon-fireElevator",16000000:"ggicon-waterMist",17000000:"ggicon-powderExtinguishingSystem",18000000:"ggicon-annihilator",19000000:"ggicon-ZigBee",20000000:"ggicon-monitorSystem",21000000:"ggicon-fireHydrant",90000000:"ggicon-other"},iconList:[],iconActiveList:[]}},mounted:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.name=this.listData.planName,this.planId=this.listData.id,this.initList();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{initListActive:function(){var t=this;o.a.post("/remoteApi/tool/deviceInfo/getDeviceInfoList",{}).then(function(e){if("success"==e.code){t.iconList=e.data;for(var i=0;i<t.iconList.length;i++){var c=t.iconList[i];t.icon[c.id]&&(c.visible=!0)}t.iconActiveList.forEach(function(element){t.iconList.forEach(function(e,c){e.id==element.facilityTypeCode&&(e.selected=!0,e.className=e.selected?"active":""),e.visible&&(e.selected?t.checked=!0:t.checked=!1)})})}})},initList:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o.a.get(o.a.forent_url.base_url+"/inspection/plan/getInspectionDeviceType/"+this.planId,{}).then(function(t){"success"==t.code&&(e.iconActiveList=t.data,e.initListActive())}),this.$forceUpdate();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),checkedIcon:function(t,i){var e=this.iconList[i];e.selected=!e.selected,e.className=e.selected?"active":"";for(i=0;i<this.iconList.length;i++){var c=this.iconList[i];if(c.visible&&!c.selected)break;i==this.iconList.length-1?(!0,this.checked=!0):this.checked=!1}this.$forceUpdate()},checkedAll:function(){var t=navigator.userAgent,e=t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1,c=t.indexOf("Edge")>-1&&!e,n=t.indexOf("Trident")>-1&&t.indexOf("rv:11.0")>-1;if(e){new RegExp("MSIE (\\d+\\.\\d+);").test(t);var o=parseFloat(RegExp.$1);return 7==o?7:8==o?8:9==o?9:10==o?10:6}c?this.ieALLActive():n?this.ieALLActive():this.restsAllActive(),this.$forceUpdate()},ieALLActive:function(){var t=this;this.iconList.forEach(function(e,i){var c=e;c.visible&&(0!=t.checked?(c.selected=!0,c.className=c.selected?"active":""):(c.selected=!1,c.className=c.selected?"active":""))})},restsAllActive:function(){var t=this;this.iconList.forEach(function(e,i){var c=e;c.visible&&(0==t.checked?(c.selected=!0,c.className=c.selected?"active":""):(c.selected=!1,c.className=c.selected?"active":""))})},saveList:function(){var t=this;if(!this.isPending&&this.submitBtn){this.isPending=!0;var e=this.listData.id,c=o.a.getGlobalVal("userObj").orgCode,n=o.a.getGlobalVal("userObj").id,r=[];Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var c in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+c+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[c]:("00"+e[c]).substr((""+e[c]).length)));return t};var l=(new Date).format("yyyy-MM-dd hh:mm:ss"),d=this.iconList;for(var i in d)if(d[i].visible&&d[i].selected){var f={};f.planId=e,f.companyId=c,f.facilityTypeCode=d[i].id,f.facilityTypeName=d[i].name,f.createUserId=n,f.createTime=l,r.push(f)}if(0==r.length)return GS.$Message.warning("请至少选择一个类型！"),void(this.isPending=!1);o.a.post(o.a.forent_url.base_url+"/inspection/plan/saveInspectionDeviceType/"+c+"/"+e,{facilityTypes:JSON.stringify(r)}).then(function(e){"success"==e.code&&(t.$message({message:"保存成功",type:"success"}),t.$router.push({name:"PatrolPlan-FacilitiesInspection"}))})}else console.log("........无法进入")},back:function(){this.$router.push({name:"PatrolPlan-FacilitiesInspection"})},changeText:function(a){return a.length>=8&&(a=a.slice(0,10)+"..."),a}},computed:{submitBtn:function(){var t=this.listData.isEnable;return"0"==t||"2"==t},canSubmit:function(){return!(this.submitBtn&&!this.isPending)},submitBtnText:function(){return this.isPending?"保存中":"提交"},submitBtnIcon:function(){return this.isPending?"el-icon-loading":""}}}),l=(c(1687),c(31)),component=Object(l.a)(r,function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",[c("el-container",[c("el-header",[c("el-row",{attrs:{gutter:24}},[c("el-col",{attrs:{span:18}},[c("div",{staticClass:"grid-content"},[c("i",{staticClass:"el-icon-back",on:{click:function(e){return t.back()}}},[c("span",{staticClass:"solid-collapse"}),t._v(" "),c("span",{staticClass:"listName"},[c("span",{staticClass:"text-color"},[t._v(t._s(t.changeText(t.name)))])])])])]),t._v(" "),c("el-col",{attrs:{span:6}},[c("div",{staticClass:"grid-content leftList"},[c("div",{staticClass:"allDiv",on:{click:t.checkedAll}},[c("el-checkbox",{staticClass:"iconAll",model:{value:t.checked,callback:function(e){t.checked="string"==typeof e?e.trim():e},expression:"checked"}},[t._v("全选")])],1),t._v(" "),c("el-button",{staticClass:"btnList",attrs:{type:"primary",disabled:t.canSubmit,icon:t.submitBtnIcon},on:{click:t.saveList}},[t._v(t._s(t.submitBtnText))])],1)])],1)],1),t._v(" "),c("el-main",[c("div",{staticClass:"mainBox"},t._l(t.iconList,function(e,n){return c("div",{directives:[{name:"show",rawName:"v-show",value:t.icon[e.id],expression:"icon[item.id]"}],key:n,staticClass:"boxIcon colorIcon",class:e.className,on:{click:function(c){return t.checkedIcon(e,n)}}},[c("div",{staticClass:"iconBig"},[c("b",{class:t.icon[e.id]})]),t._v(" "),c("div",{staticClass:"iconSize"},[t._v(t._s(e.name))]),t._v(" "),c("b",{staticClass:"box-icon ggicon-selected"})])}),0)])],1)],1)},[],!1,null,"0a857cc6",null);e.default=component.exports}}]);