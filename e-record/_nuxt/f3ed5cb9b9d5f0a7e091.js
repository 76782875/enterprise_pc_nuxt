(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{1145:function(t,e,o){var content=o(1150);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(17).default)("59352f9c",content,!0,{sourceMap:!1})},1146:function(t,e,o){var content=o(1152);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(17).default)("031c9afc",content,!0,{sourceMap:!1})},1147:function(t,e,o){"use strict";o(6);var n={props:{widgetInfo:Object},data:function(){return{}},methods:{handleSizeChange:function(t){this.pageSize=t,this.$emit("sonHandleCurrentChange",{pageSize:this.pageSize})},handleCurrentChange:function(t){this.$emit("sonHandleCurrentChange",{pageNo:t})}},mounted:function(){this.$emit("sonHandleCurrentChange",{pageSize:10,pageNo:1})}},r=(o(1149),o(31)),component=Object(r.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-pagination",{attrs:{"current-page":this.widgetInfo.pageNo,"page-sizes":[10,20,30,40],"page-size":this.widgetInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.widgetInfo.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})],1)},[],!1,null,"352c168e",null);e.a=component.exports},1148:function(t,e,o){"use strict";var n=o(6),r={data:function(){return{CmenuName:{}}},mounted:function(){this.CmenuName=n.a.getGlobalVal("CmenuName"),console.log("this.CmenuName:",this.CmenuName)}},l=(o(1151),o(31)),component=Object(l.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",{staticClass:"l-head"},[e("span",[this._v(this._s(this.CmenuName.parName)+" >")]),this._v(" "),e("span",[this._v(this._s(this.CmenuName.name))])])])},[],!1,null,"3d4e79c6",null);e.a=component.exports},1149:function(t,e,o){"use strict";var n=o(1145);o.n(n).a},1150:function(t,e,o){(t.exports=o(16)(!1)).push([t.i,".notab[data-v-352c168e]{height:calc(100vh - 216px);width:100%;background:#fff;border:1px solid #e2e4e8}.notab>div[data-v-352c168e]:first-child{width:100%;height:calc(100vh - 266px)}.staticNotab[data-v-352c168e]{height:calc(100vh - 136px);width:100%;background:#fff;border:1px solid #e2e4e8}.reportNoTab>div[data-v-352c168e]:first-child{width:100%;height:calc(100vh - 296px);overflow-y:auto}.userNotab[data-v-352c168e]{height:calc(100vh - 180px);width:100%;background:#fff}.userNotab>div[data-v-352c168e]:first-child{width:100%;height:calc(100vh - 188px);overflow-y:auto}.myTab[data-v-352c168e]{height:calc(100vh - 258px);background:#fff;width:100%;border:1px solid #e2e4e8}.myTab>div[data-v-352c168e]:first-child{width:100%;height:calc(100vh - 308px)}@media screen and (max-width:1680px){.notab[data-v-352c168e]{height:calc(100vh - 208px);background:#fff}.notab>div[data-v-352c168e]:first-child{height:calc(100vh - 258px)}.myTab[data-v-352c168e]{height:calc(100vh - 250px);background:#fff}.myTab>div[data-v-352c168e]:first-child{height:calc(100vh - 300px)}.staticNotab[data-v-352c168e]{height:calc(100vh - 132px)}}@media screen and (max-width:1440px){.notab[data-v-352c168e]{height:calc(100vh - 173px);background:#fff}.notab>div[data-v-352c168e]:first-child{height:calc(100vh - 223px)}.myTab[data-v-352c168e]{height:calc(100vh - 215px);background:#fff}.myTab>div[data-v-352c168e]:first-child{height:calc(100vh - 265px)}.staticNotab[data-v-352c168e]{height:calc(100vh - 107px)}}@media screen and (max-width:1366px){.reportNoTab>div[data-v-352c168e]:first-child{width:100%;height:calc(100vh - 286px);overflow-y:auto}}",""])},1151:function(t,e,o){"use strict";var n=o(1146);o.n(n).a},1152:function(t,e,o){(t.exports=o(16)(!1)).push([t.i,".l-head[data-v-3d4e79c6]{font-weight:400;font-family:Microsoft YaHei;padding:0 0 10px;margin-left:.6rem;text-align:left}.l-head span[data-v-3d4e79c6]{font-size:1.8rem;color:#717171;line-height:3.9rem}@media screen and (max-width:1440px){.l-head span[data-v-3d4e79c6]{line-height:1.7rem}}",""])},1378:function(t,e,o){var content=o(1750);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(17).default)("70709e57",content,!0,{sourceMap:!1})},1379:function(t,e,o){var content=o(1752);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(17).default)("6617d4b6",content,!0,{sourceMap:!1})},1749:function(t,e,o){"use strict";var n=o(1378);o.n(n).a},1750:function(t,e,o){(t.exports=o(16)(!1)).push([t.i,".notab[data-v-b4320d52]{height:calc(100vh - 216px);width:100%;background:#fff;border:1px solid #e2e4e8}.notab>div[data-v-b4320d52]:first-child{width:100%;height:calc(100vh - 266px)}.staticNotab[data-v-b4320d52]{height:calc(100vh - 136px);width:100%;background:#fff;border:1px solid #e2e4e8}.reportNoTab>div[data-v-b4320d52]:first-child{width:100%;height:calc(100vh - 296px);overflow-y:auto}.userNotab[data-v-b4320d52]{height:calc(100vh - 180px);width:100%;background:#fff}.userNotab>div[data-v-b4320d52]:first-child{width:100%;height:calc(100vh - 188px);overflow-y:auto}.myTab[data-v-b4320d52]{height:calc(100vh - 258px);background:#fff;width:100%;border:1px solid #e2e4e8}.myTab>div[data-v-b4320d52]:first-child{width:100%;height:calc(100vh - 308px)}@media screen and (max-width:1680px){.notab[data-v-b4320d52]{height:calc(100vh - 208px);background:#fff}.notab>div[data-v-b4320d52]:first-child{height:calc(100vh - 258px)}.myTab[data-v-b4320d52]{height:calc(100vh - 250px);background:#fff}.myTab>div[data-v-b4320d52]:first-child{height:calc(100vh - 300px)}.staticNotab[data-v-b4320d52]{height:calc(100vh - 132px)}}@media screen and (max-width:1440px){.notab[data-v-b4320d52]{height:calc(100vh - 173px);background:#fff}.notab>div[data-v-b4320d52]:first-child{height:calc(100vh - 223px)}.myTab[data-v-b4320d52]{height:calc(100vh - 215px);background:#fff}.myTab>div[data-v-b4320d52]:first-child{height:calc(100vh - 265px)}.staticNotab[data-v-b4320d52]{height:calc(100vh - 107px)}}@media screen and(max-width:1366px){.reportNoTab>div[data-v-b4320d52]:first-child{width:100%;height:calc(100vh - 286px);overflow-y:auto}}",""])},1751:function(t,e,o){"use strict";var n=o(1379);o.n(n).a},1752:function(t,e,o){(t.exports=o(16)(!1)).push([t.i,".el-tooltip__popper.is-dark{max-width:300px}",""])},1874:function(t,e,o){"use strict";o.r(e);var n=o(6),r=o(1148),l=o(1147),c={components:{Title:r.a,Pagination:l.a},data:function(){return{isLoading:!1,ruleForm:{date1:""},dateTime:"",searchTaskNo:"",formInline:{reportTypeId:"",pageSize:6,pageNo:1,bgtype:"",alarmTimeStart:"",taskNo:"",proprietorId:""},tableData:[],reportType:[{reportTypeId:"A",reportTypeName:"防火巡查报告"},{reportTypeId:"B",reportTypeName:"防火检查报告"},{reportTypeId:"C",reportTypeName:"设备设施检查报告"},{reportTypeId:"D",reportTypeName:"消控室巡查报告"}],widgetInfo:{total:null,list:[],pageSize:6,pageNo:1},pickerOptions:{onClick:function(t){var e=new Date,o=new Date;o.setTime(o.getTime()-6048e5),t.$emit("pick",[o,e])}}}},methods:{getReportList:function(){var t=this;this.isLoading=!0,n.a.post(n.a.forent_url.base_url+"/safety/report/list.mvc?orgId="+n.a.getGlobalVal("userObj").orgCode,{pageSize:this.widgetInfo.pageSize,pageNo:this.widgetInfo.pageNo,proprietorId:n.a.getGlobalVal("userObj").orgCode,bgtype:this.formInline.reportTypeId,alarmTimeStart:""===this.dateTime||null===this.dateTime?"":this.dateTime[0]+" 00:00:00",taskNo:this.searchTaskNo},5e3).then(function(e){"success"===e.code?(t.isLoading=!1,t.tableData=e.data.rows,t.widgetInfo.list=e.data.rows,t.widgetInfo.total=null==e.data.total?0:e.data.total,t.widgetInfo.pageNo=e.data.pageNo,t.widgetInfo.pageSize=e.data.pageSize):(t.isLoading=!1,t.tableData=[],t.widgetInfo.total=0)}).catch(function(e){console.log(e),t.isLoading=!1,t.$message({type:"warning",message:"加载超时,请重新加载!"})})},selectReportTypeId:function(t){this.formInline.reportTypeId=t,this.getReportList()},selectDateTime:function(t){this.dateTime=t,this.widgetInfo.pageNo=1,this.getReportList()},handleSearch:function(){this.widgetInfo.pageNo=1,this.getReportList()},InputPlan:function(t){this.searchTaskNo=t,this.widgetInfo.pageNo=1,this.getReportList()},queryReport:function(t){window.location.href=n.a.forent_url.moblie_url+"/safety/report/createEquipmentReport.mvc?taskId="+t.taskId},sonHandleCurrentChange:function(t){this.widgetInfo.pageSize=t.pageSize?parseInt(t.pageSize):this.widgetInfo.pageSize,this.widgetInfo.pageNo=t.pageNo?parseInt(t.pageNo):this.widgetInfo.pageNo,this.getReportList()}}},d=(o(1749),o(1751),o(31)),component=Object(d.a)(c,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-row",[o("el-col",{attrs:{span:24}},[o("div",{staticClass:"grid-content"},[o("Title"),t._v(" "),o("el-form",{staticClass:"filterAll",attrs:{inline:!0}},[o("el-row",[o("el-col",{attrs:{span:20}},[o("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"start"}},[o("el-col",{staticClass:"text-4",staticStyle:{width:"240px"},attrs:{span:6}},[o("label",[t._v("报告类型:")]),t._v(" "),o("el-select",{attrs:{placeholder:"报告类型",clearable:""},on:{change:t.selectReportTypeId},model:{value:t.formInline.reportTypeId,callback:function(e){t.$set(t.formInline,"reportTypeId",e)},expression:"formInline.reportTypeId"}},t._l(t.reportType,function(t){return o("el-option",{key:t.reportTypeId,attrs:{label:t.reportTypeName,value:t.reportTypeId}})}),1)],1),t._v(" "),o("el-col",{staticClass:"text-4",staticStyle:{width:"320px"},attrs:{span:7}},[o("label",[t._v("查询时间:")]),t._v(" "),o("el-date-picker",{attrs:{size:"small","range-separator":"",type:"daterange","picker-options":t.pickerOptions,"start-placeholder":"请选择日期","value-format":"yyyy-MM-dd"},on:{change:t.selectDateTime},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}})],1)],1)],1),t._v(" "),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[o("el-input",{staticClass:"searchInput",attrs:{clearable:"",placeholder:"请输入任务编号"},on:{change:t.InputPlan},model:{value:t.searchTaskNo,callback:function(e){t.searchTaskNo="string"==typeof e?e.trim():e},expression:"searchTaskNo"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleSearch},slot:"append"})],1)],1)],1)],1),t._v(" "),o("div",{staticClass:"notab"},[o("el-scrollbar",[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%",padding:"0"},attrs:{data:t.tableData,stripe:""}},[o("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",prop:"taskNo",label:"任务编号",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"inspectionTime",label:"巡查日期",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",label:"报告类型"},scopedSlots:t._u([{key:"default",fn:function(e){return["A"===e.row.reportTypeId?o("span",[t._v("防火巡查报告")]):t._e(),t._v(" "),"B"===e.row.reportTypeId?o("span",[t._v("防火检查报告")]):t._e(),t._v(" "),"C"===e.row.reportTypeId?o("span",[t._v("设备设施检查报告")]):t._e(),t._v(" "),"D"===e.row.reportTypeId?o("span",[t._v("消控室巡查报告")]):t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"name",label:"提交人"}}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"createDate",label:"报告生成时间"}}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tooltip",{attrs:{content:"生成报告",placement:"bottom"}},[o("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"text",icon:"icon-l-new l-icons ggicon-documents",title:"生成报告"},on:{click:function(o){return t.queryReport(e.row)}}})],1)]}}])})],1)],1),t._v(" "),o("Pagination",{attrs:{widgetInfo:t.widgetInfo},on:{sonHandleCurrentChange:t.sonHandleCurrentChange}})],1)],1)])],1)],1)},[],!1,null,"b4320d52",null);e.default=component.exports}}]);